{{ define "main" }}
<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      {{ .Content }}
      <br>
      <h1>Have a project in mind? Let's chat.</h1>
      <br>
      <form action="https://formspree.io/f/mayvdeee" method="POST">
        <label for="email">Your email, so we can get back to you:</label>
        <input type="email" id="email" name="email" placeholder="email@example.com" rows="6" style="width:100%; color: var(--input-color)" required>
        <br><br>
        <label for="message">Your message:</label>
        <textarea id="message" name="message" placeholder="hello..." rows="6" style="width:100%; height:150px; color: var(--input-color)" required></textarea>
        <br>
        <!-- reCAPTCHA widget -->
        <div class="g-recaptcha" data-sitekey="6LfFldgSAAAAAKZsuk4ejWF3ng4Q-WMrvh5NF3Ty"></div>
        <br>
        <!-- Styled Button -->
        <button id="submit-button" type="submit" style="
          padding: 10px 20px;
          border: none;
          border-radius: 5px;
          font-size: 16px;
          font-weight: regular;
          cursor: pointer;">
          Send
        </button>

        <script>
          // Function to apply button styles based on the current theme
          function applyButtonTheme() {
            const button = document.getElementById("submit-button");
            const theme = localStorage.getItem("pref-theme") || "auto";
            const isDark = theme === "dark" || (theme === "auto" && window.matchMedia('(prefers-color-scheme: dark)').matches);

            // Apply styles dynamically based on the theme
            if (isDark) {
              button.style.backgroundColor = "white";
              button.style.color = "black";
              button.style.fontFamily = "var(--font-family)";
            } else {
              button.style.backgroundColor = "black";
              button.style.color = "white";
              button.style.fontFamily = "var(--font-family)";
            }
          }

          // Listen for theme changes (PaperMod stores theme in localStorage)
          document.addEventListener("DOMContentLoaded", () => {
            applyButtonTheme(); // Apply the theme on page load

            // Detect when the user toggles the theme
            const themeToggle = document.getElementById("theme-toggle");
            if (themeToggle) {
              themeToggle.addEventListener("click", () => {
                setTimeout(() => applyButtonTheme(), 100); // Delay to allow theme switch
              });
            }
          });
        </script>


      </form>

      <!-- Include the Google reCAPTCHA script -->
      <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    </div>
  </div>
</div>
{{ end }}
